<div class="event-comparison-container">
  @if (hasComparison()) {
    <h2>{{ i18n.t('comparison.title') }}</h2>
    
    @if (differences().length > 0) {
      <div class="differences-section">
        <h3>{{ i18n.t('comparison.keyDifferences') }}</h3>
        <ul class="differences-list">
          @for (diff of differences(); track diff) {
            <li>{{ diff }}</li>
          }
        </ul>
      </div>
    } @else {
      <div class="no-differences">
        <p>{{ i18n.t('comparison.noDifferences') }}</p>
      </div>
    }
    
    <div class="comparison-grid">
      <div class="comparison-column">
        <h3 class="column-header primary">{{ i18n.t('comparison.primaryHeader') }}</h3>
        <div class="shipment-info">
          @if (primaryEvent()?.shipmentId) {
            <div class="info-item">
              <strong>{{ i18n.t('comparison.label.shipmentId') }}</strong> {{ primaryEvent()?.shipmentId }}
            </div>
          }
          @if (primaryEvent()?.origin) {
            <div class="info-item">
              <strong>{{ i18n.t('comparison.label.origin') }}</strong> {{ primaryEvent()?.origin }}
            </div>
          }
          @if (primaryEvent()?.destination) {
            <div class="info-item">
              <strong>{{ i18n.t('comparison.label.destination') }}</strong> {{ primaryEvent()?.destination }}
            </div>
          }
          <div class="info-item">
            <strong>{{ i18n.t('comparison.label.totalEvents') }}</strong> {{ primarySortedEvents().length }}
          </div>
        </div>
        
        <div class="events-list">
          @for (event of primarySortedEvents(); track event.eventDateTime) {
            <div class="event-card">
              <div class="event-type">{{ event.eventType }}</div>
              <div class="event-date">{{ event.eventDateTime | date:'short' }}</div>
              @if (event.location) {
                <div class="event-location">üìç {{ event.location }}</div>
              }
            </div>
          }
        </div>
      </div>
      
      <div class="comparison-column">
        <h3 class="column-header secondary">{{ i18n.t('comparison.secondaryHeader') }}</h3>
        <div class="shipment-info">
          @if (secondaryEvent()?.shipmentId) {
            <div class="info-item">
              <strong>{{ i18n.t('comparison.label.shipmentId') }}</strong> {{ secondaryEvent()?.shipmentId }}
            </div>
          }
          @if (secondaryEvent()?.origin) {
            <div class="info-item">
              <strong>{{ i18n.t('comparison.label.origin') }}</strong> {{ secondaryEvent()?.origin }}
            </div>
          }
          @if (secondaryEvent()?.destination) {
            <div class="info-item">
              <strong>{{ i18n.t('comparison.label.destination') }}</strong> {{ secondaryEvent()?.destination }}
            </div>
          }
          <div class="info-item">
            <strong>{{ i18n.t('comparison.label.totalEvents') }}</strong> {{ secondarySortedEvents().length }}
          </div>
        </div>
        
        <div class="events-list">
          @for (event of secondarySortedEvents(); track event.eventDateTime) {
            <div class="event-card">
              <div class="event-type">{{ event.eventType }}</div>
              <div class="event-date">{{ event.eventDateTime | date:'short' }}</div>
              @if (event.location) {
                <div class="event-location">üìç {{ event.location }}</div>
              }
            </div>
          }
        </div>
      </div>
    </div>
  } @else {
    <div class="no-comparison">
      <p>{{ i18n.t('comparison.noComparison') }}</p>
    </div>
  }
</div>
